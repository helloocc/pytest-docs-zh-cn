
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>py.test 2.0.0: asserts++, unittest++, reporting++, config++, docs++ &#8212; pytest documentation</title>
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments_pytest.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/pytest1favi.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="../changelog.html" />
    <link rel="prev" title="py.test 2.0.1: bug fixes" href="release-2.0.1.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  
  
  


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../changelog.html" title="&lt;no title&gt;"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="release-2.0.1.html" title="py.test 2.0.1: bug fixes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">pytest-5.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Release announcements</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="py-test-2-0-0-asserts-unittest-reporting-config-docs">
<h1>py.test 2.0.0: asserts++, unittest++, reporting++, config++, docs++<a class="headerlink" href="#py-test-2-0-0-asserts-unittest-reporting-config-docs" title="Permalink to this headline">¶</a></h1>
<p>Welcome to pytest-2.0.0, a major new release of “py.test”, the rapid
easy Python testing tool.  There are many new features and enhancements,
see below for summary and detailed lists.  A lot of long-deprecated code
has been removed, resulting in a much smaller and cleaner
implementation.  See the new docs with examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/2.0.0/index.html">http://pytest.org/2.0.0/index.html</a></p>
</div></blockquote>
<p>A note on packaging: pytest used to part of the “py” distribution up
until version py-1.3.4 but this has changed now:  pytest-2.0.0 only
contains py.test related code and is expected to be backward-compatible
to existing test code. If you want to install pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Many thanks to all issue reporters and people asking questions or
complaining.  Particular thanks to Floris Bruynooghe and Ronny Pfannschmidt
for their great coding contributions and many others for feedback and help.</p>
<p>best,
holger krekel</p>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>new invocations through Python interpreter and from Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span>      <span class="c1"># on all pythons &gt;= 2.5</span>
</pre></div>
</div>
<p>or from a python program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span> <span class="p">;</span> <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">arglist</span><span class="p">,</span> <span class="n">pluginlist</span><span class="p">)</span>
</pre></div>
</div>
<p>see <a class="reference external" href="http://pytest.org/2.0.0/usage.html">http://pytest.org/2.0.0/usage.html</a> for details.</p>
</li>
<li><p>new and better reporting information in assert expressions
if comparing lists, sequences or strings.</p>
<p>see <a class="reference external" href="http://pytest.org/2.0.0/assert.html#newreport">http://pytest.org/2.0.0/assert.html#newreport</a></p>
</li>
<li><p>new configuration through ini-files (setup.cfg or tox.ini recognized),
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pytest</span><span class="p">]</span>
<span class="n">norecursedirs</span> <span class="o">=</span> <span class="o">.</span><span class="n">hg</span> <span class="n">data</span><span class="o">*</span>  <span class="c1"># don&#39;t ever recurse in such dirs</span>
<span class="n">addopts</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span> <span class="o">--</span><span class="n">pyargs</span>      <span class="c1"># add these command line options by default</span>
</pre></div>
</div>
<p>see <a class="reference external" href="http://pytest.org/2.0.0/customize.html">http://pytest.org/2.0.0/customize.html</a></p>
</li>
<li><p>improved standard unittest support.  In general py.test should now
better be able to run custom unittest.TestCases like twisted trial
or Django based TestCases.  Also you can now run the tests of an
installed ‘unittest’ package with py.test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">test</span> <span class="o">--</span><span class="n">pyargs</span> <span class="n">unittest</span>
</pre></div>
</div>
</li>
<li><p>new “-q” option which decreases verbosity and prints a more
nose/unittest-style “dot” output.</p></li>
<li><p>many many more detailed improvements details</p></li>
</ul>
</div>
<div class="section" id="fixes">
<h2>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>fix issue126 - introduce py.test.set_trace() to trace execution via
PDB during the running of tests even if capturing is ongoing.</p></li>
<li><p>fix issue124 - make reporting more resilient against tests opening
files on filedescriptor 1 (stdout).</p></li>
<li><p>fix issue109 - sibling conftest.py files will not be loaded.
(and Directory collectors cannot be customized anymore from a Directory’s
conftest.py - this needs to happen at least one level up).</p></li>
<li><p>fix issue88 (finding custom test nodes from command line arg)</p></li>
<li><p>fix issue93 stdout/stderr is captured while importing conftest.py</p></li>
<li><p>fix bug: unittest collected functions now also can have “pytestmark”
applied at class/module level</p></li>
</ul>
</div>
<div class="section" id="important-notes">
<h2>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The usual way in pre-2.0 times to use py.test in python code was
to import “py” and then e.g. use “py.test.raises” for the helper.
This remains valid and is not planned to be deprecated.  However,
in most examples and internal code you’ll find “import pytest”
and “pytest.raises” used as the recommended default way.</p></li>
<li><p>pytest now first performs collection of the complete test suite
before running any test. This changes for example the semantics of when
pytest_collectstart/pytest_collectreport are called.  Some plugins may
need upgrading.</p></li>
<li><p>The pytest package consists of a 400 LOC core.py and about 20 builtin plugins,
summing up to roughly 5000 LOCs, including docstrings. To be fair, it also
uses generic code from the “pylib”, and the new “py” package to help
with filesystem and introspection/code manipulation.</p></li>
</ul>
</div>
<div class="section" id="incompatible-removals">
<h2>(Incompatible) Removals<a class="headerlink" href="#incompatible-removals" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>py.test.config is now only available if you are in a test run.</p></li>
<li><p>the following (mostly already deprecated) functionality was removed:</p>
<ul class="simple">
<li><p>removed support for Module/Class/… collection node definitions
in conftest.py files.  They will cause nothing special.</p></li>
<li><p>removed support for calling the pre-1.0 collection API of “run()” and “join”</p></li>
<li><p>removed reading option values from conftest.py files or env variables.
This can now be done much much better and easier through the ini-file
mechanism and the “addopts” entry in particular.</p></li>
<li><p>removed the “disabled” attribute in test classes.  Use the skipping
and pytestmark mechanism to skip or xfail a test class.</p></li>
</ul>
</li>
<li><p>py.test.collect.Directory does not exist anymore and it
is not possible to provide an own “Directory” object.
If you have used this and don’t know what to do, get
in contact.  We’ll figure something out.</p>
<p>Note that pytest_collect_directory() is still called but
any return value will be ignored.  This allows to keep
old code working that performed for example “py.test.skip()”
in collect() to prevent recursion into directory trees
if a certain dependency or command line option is missing.</p>
</li>
</ul>
<p>see <a class="reference external" href="https://docs.python.org/3/whatsnew/changelog.html#changelog" title="(in Python v3.7)"><span>Changelog</span></a> for more detailed changes.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../contents.html">
              <img class="logo" src="../_static/pytest1.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel"
        placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
  </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3><a href="../contents.html">Table Of Contents</a></h3>

<ul>
  <li><a href="../index.html">Home</a></li>
  <li><a href="../getting-started.html">Install</a></li>
  <li><a href="../contents.html">Contents</a></li>
  <li><a href="../reference.html">API Reference</a></li>
  <li><a href="../example/index.html">Examples</a></li>
  <li><a href="../customize.html">Customize</a></li>
  <li><a href="../changelog.html">Changelog</a></li>
  <li><a href="../contributing.html">Contributing</a></li>
  <li><a href="../backwards-compatibility.html">Backwards Compatibility</a></li>
  <li><a href="../py27-py34-deprecation.html">Python 2.7 and 3.4 Support</a></li>
  <li><a href="../sponsor.html">Sponsor</a></li>
  <li><a href="../license.html">License</a></li>
  <li><a href="../contact.html">Contact Channels</a></li>
</ul>
  <hr>
  <ul>
<li><a class="reference internal" href="#">py.test 2.0.0: asserts++, unittest++, reporting++, config++, docs++</a><ul>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
<li><a class="reference internal" href="#important-notes">Important Notes</a></li>
<li><a class="reference internal" href="#incompatible-removals">(Incompatible) Removals</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents.html">Documentation overview</a><ul>
  <li><a href="index.html">Release announcements</a><ul>
      <li>Previous: <a href="release-2.0.1.html" title="previous chapter">py.test 2.0.1: bug fixes</a></li>
      <li>Next: <a href="../changelog.html" title="next chapter">&lt;no title&gt;</a></li>
  </ul></li>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://pypi.org/project/pytest/">pytest @ PyPI</a></li>
  <li><a href="https://github.com/pytest-dev/pytest/">pytest @ GitHub</a></li>
  <li><a href="http://plugincompat.herokuapp.com/">3rd party plugins</a></li>
  <li><a href="https://github.com/pytest-dev/pytest/issues">Issue Tracker</a></li>
  <li><a href="https://media.readthedocs.org/pdf/pytest/latest/pytest.pdf">PDF Documentation</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

  <div class="footer">
    &copy; Copyright 2015–2019, holger krekel and pytest-dev team.
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 2.1.2.
  </div>
  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7597274-13']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>